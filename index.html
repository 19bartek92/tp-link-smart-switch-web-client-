<!doctype html>
<html ng-app="myApp" ng-cloak>
<head>
    <meta charset="utf-8">
    <title>TP-Link Web UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body layout="column" style="overflow-y:hidden">
<div ng-controller="dash" style="overflow-y:auto" md-theme="custom">

    <md-toolbar>
        <div class="md-toolbar-tools">
            <h2 flex md-truncate>TP-Link Web UI</h2>
        </div>
    </md-toolbar>

    <md-content class="md-padding">
        <p>Todo:</p>
        <ul>
            <li><strike>generate UUID</strike> {{UUID}}</li>
            <li><strike>authenticate against service</strike> {{token}}</li>
            <li><strike>find device ids</strike></li>
            <li><strike>make them actionable</strike></li>
            <li><strike>store config so that it retrieves automatically</strike></li>
            <li>improve UI - tabs, probably</li>
            <li>add remember me</li>
        </ul>
    </md-content>
    <md-content class="md-padding">
        <md-input-container>
            <label>Username</label>
            <input ng-model="username">
        </md-input-container>
        <md-input-container>
            <label>Password</label>
            <input ng-model="password">
        </md-input-container>
        <md-button class="md-raised md-primary" ng-click="authenticate()">Authenticate</md-button>
    </md-content>
    <md-content ng-if="token != ''" class="md-padding">
    <p>Your token is {{token}}</p>
    <md-button class="md-raised md-primary" ng-click="refreshDevices()">Refresh Devices</md-button>
    </md-content>

    <md-content>
        <md-list class="md-dense" flex>
            <md-subheader class="md-no-sticky">Devices</md-subheader>
            <md-list-item class="md-2-line" ng-repeat="device in devices">
                <div class="md-list-item-text">
                    <h3>{{device.alias}}</h3>
                    <p>{{device.deviceModel}} - {{device.deviceName}}</p>
                </div>
                <md-switch ng-change="setState($index,device.is_powered)" ng-model="device.is_powered"></md-switch>
                <md-divider/>
            </md-list-item>

        </md-list>
    </md-content>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-animate.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-cookies.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-aria.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-messages.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.4/angular-material.min.js"></script>

<script src="script.js"></script>
</body>
</html>

